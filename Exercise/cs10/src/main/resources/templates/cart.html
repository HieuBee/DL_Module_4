<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Shopping Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <a href="/shop" style="text-decoration: none">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-skip-backward-fill" viewBox="0 0 16 16">
                    <path d="M.5 3.5A.5.5 0 0 0 0 4v8a.5.5 0 0 0 1 0V8.753l6.267 3.636c.54.313 1.233-.066 1.233-.697v-2.94l6.267 3.636c.54.314 1.233-.065 1.233-.696V4.308c0-.63-.693-1.01-1.233-.696L8.5 7.248v-2.94c0-.63-.692-1.01-1.233-.696L1 7.248V4a.5.5 0 0 0-.5-.5z"/>
                </svg>
            </a>
            <h1>Your Cart</h1>
            <form th:action="@{/shop}" th:object="${cart}" method="post">
                <span style="background: #e4c0b9; font-size: 30px; border-radius: 10px">Total Items: <span th:text="${cart.countItemQuantity()}"></span></span>
                <span style="background: #e4c0b9; float: right;font-size: 30px; border-radius: 10px">Total Products: <span th:text="${cart.countProductQuantity()}"></span></span>


                <table class="table">
                    <thead class="thead-dark">
                    <tr>
                        <th scope="col">Item</th>
                        <th scope="col">Img</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Price</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="productMap: ${cart.productMap}">
                        <td th:text="${productMap.key.name}"></td>
                        <td>
                            <img th:src="'/img/' + ${productMap.key.img} + '.jpg'" style="width: 70px; height: auto">
                        </td>

                        <td>
                            <a style="text-decoration: none" id="decrease_button" th:href="@{/cart/deleteQuantity/__${productMap.key.id}__}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-dash-circle-fill" viewBox="0 0 16 16">
                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"/>
                                </svg>
                            </a>
                            <span th:text="${productMap.value}"></span>
                            <a style="text-decoration: none" id="increase_button" th:href="@{/cart/addQuantity/__${productMap.key.id}__}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
                                </svg>
                            </a>
                        </td>

                        <td th:text="${productMap.key.price}"></td>
                    </tr>
                    </tbody>
                </table>

                <h3>Total: <span th:text="${cart.countTotalPayment()}"></span></h3>
            </form>
        </div>
    </div>
</div>
</body>
</html>